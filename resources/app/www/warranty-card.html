<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warranty Card - KÃ¤rcher</title>
    <style>
        @page {
            size: A4 landscape;
            margin: 0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: white;
            font-size: 9pt;
            line-height: 1.3;
        }
        
        .page-container {
            width: 297mm;
            height: 210mm;
            padding: 4mm 8mm;
            margin: 0 auto;
            background: white;
            display: flex;
            gap: 10mm;
            align-items: stretch;
        }
        
        .left-column {
            flex: 1;
            font-size: 8pt;
            line-height: 1.3;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .right-column {
            width: 48%;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .logo {
            text-align: right;
            margin-bottom: 12px;
        }
        
        .logo-text {
            font-size: 40pt;
            font-weight: 900;
            font-family: Arial, sans-serif;
            letter-spacing: 3px;
            position: relative;
            display: inline-block;
            padding-bottom: 4px;
        }
        
        .logo-text::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: #FFD700;
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        
        .warranty-card {
            border: 2px solid #000;
            margin-bottom: 15px;
        }
        
        .header-text {
            font-size: 8pt;
            padding: 8px 10px;
            line-height: 1.3;
            border-bottom: 2px solid #000;
            background: white;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        td {
            border: none;
            border-bottom: 2px solid #000;
            padding: 6px 10px;
            font-size: 9pt;
            vertical-align: middle;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .label {
            width: 140px;
            background: #d6e4f5;
            font-weight: normal;
            color: #000;
            border-right: 2px solid #000;
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        
        .value {
            font-weight: bold;
            font-size: 10pt;
            background: white;
            color: #000;
        }
        
        .repairs-section {
            border: 2px solid #000;
        }
        
        .repairs-header {
            font-size: 8pt;
            padding: 6px 10px;
            border-bottom: 2px solid #000;
            font-weight: normal;
        }
        
        .repairs-table td {
            padding: 5px 10px;
            font-size: 8pt;
        }
        
        .repairs-label {
            background: #d6e4f5;
            border-right: 2px solid #000;
            width: 60px;
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        
        .company-info {
            margin-top: 8px;
            font-size: 7.5pt;
            line-height: 1.3;
        }
        
        h3 {
            font-size: 10pt;
            margin: 0 0 5px 0;
            font-weight: bold;
        }
        
        p {
            margin: 2px 0;
            text-align: justify;
        }
        
        ul {
            margin: 2px 0;
            padding-left: 15px;
        }
        
        li {
            margin: 1px 0;
        }
        
        ul {
            margin: 2px 0;
            padding-left: 12px;
        }
        
        li {
            margin: 1px 0;
        }
        
        strong {
            font-weight: bold;
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                margin: 0;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="no-print" style="text-align: right; padding: 15px; background: #f5f5f5; border-bottom: 2px solid #ddd;">
        <button onclick="window.print()" style="background: #4285f4; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 14px; cursor: pointer; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
            ğŸ–¨ï¸ Print Warranty Card
        </button>
        <button onclick="goBack()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-size: 14px; cursor: pointer; margin-left: 8px;">
            â† Back to Store Sales
        </button>
    </div>

    <div class="page-container">
        <!-- Left Column - Terms and Conditions -->
        <div class="left-column">
            <h3>TÃ« drejtat e pÃ«rdoruesit pÃ«r produktet KÃ„RCHER</h3>
            <p>Pajisjet KÃ„RCHER prodhohen me kujdes tÃ« veÃ§antÃ« dhe i nÃ«nshtrohen kontrollit tÃ« detajuar tÃ« cilÃ«sisÃ« para dorÃ«zimit. MegjithatÃ«, nÃ«se pajisja juaj paraqet njÃ« defekt prodhimi ose materiali, ju keni tÃ« drejtÃ« tÃ« pÃ«rfitoni nga garancia sipas kushteve tÃ« mÃ«poshtme. PÃ«r tÃ« pÃ«rfituar garancinÃ« duhet tÃ« paraqisni pajisjen sÃ« bashku me faturÃ«n dhe kartÃ«n e garancisÃ« tÃ« plotÃ«suar.</p>

            <p><strong>1.</strong> GjatÃ« periudhÃ«s sÃ« garancisÃ« eliminojmÃ« pa pagesÃ« defektet e shkaktuara nga prodhimi ose materiali dhe pjesÃ«t e zÃ«vendÃ«suara qÃ« rezultojnÃ« me defekt. Kjo garanci nuk cenon tÃ« drejtat tuaja tÃ« tjera ligjore (p.sh. pÃ«rgjegjÃ«sia pÃ«r defekte materiale).</p>

            <p><strong>2.</strong> NÃ«se pajisja juaj KÃ„RCHER pÃ«son defekt gjatÃ« periudhÃ«s sÃ« garancisÃ« (sÃ« bashku me aksesorÃ«t e dorÃ«zuar me pajisjen), mund ta paraqisni nÃ« pikÃ«n e shitjes ku Ã«shtÃ« blerÃ« ose tek njÃ« partner i autorizuar i shÃ«rbimit KÃ„RCHER. Pikat e shÃ«rbimit mund tÃ« gjenden nÃ« faqen zyrtare: www.kaercher.com.</p>

            <p><strong>3.</strong> Periudha e garancisÃ« pÃ«r pajisjet Home &amp; Garden (linja e verdhÃ« dhe e bardhÃ«) Ã«shtÃ« <strong>12 muaj</strong>. NÃ«se pÃ«rdoren pÃ«r qÃ«llime profesionale ose komerciale, periudha e garancisÃ« Ã«shtÃ« <strong>0 muaj</strong>. E drejta e garancisÃ« vÃ«rtetohet vetÃ«m me faturÃ« blerjeje dhe kartÃ« garancie tÃ« plotÃ«suar. Riparimi i pajisjes duhet tÃ« kryhet brenda njÃ« afati maksimal prej 45 ditÃ«sh nga paraqitja/raportimi i defektit.</p>

            <p><strong>4.</strong> Pajisjet portative KÃ„RCHER duhet tÃ« sillen ose tÃ« dÃ«rgohen sÃ« bashku me aksesorÃ«t standardÃ« nÃ« pikÃ«n ku Ã«shtÃ« blerÃ« pajisja ose nÃ« njÃ« qendÃ«r tÃ« autorizuar shÃ«rbimi.</p>

            <p><strong>5.</strong> Riparimi nÃ« vend (tek klienti) mund tÃ« kÃ«rkohet vetÃ«m pÃ«r pajisje KÃ„RCHER stacionare ose pajisje tÃ« mÃ«dha, kur kjo Ã«shtÃ« teknikisht e arsyeshme. Pas pÃ«rfundimit tÃ« periudhÃ«s sÃ« garancisÃ«, shpenzimet e transportit dhe tÃ« daljes nÃ« vend i mban klienti.</p>

            <p><strong>6.</strong> E drejta e garancisÃ« nuk zbatohet nÃ« rastet e mÃ«poshtme:</p>
            <ul>
                <li>nÃ«se defekti ka ardhur si pasojÃ« e zjarrit, pÃ«rmbytjes, tÃ«rmetit, rrufesÃ«, vjedhjes ose rasteve tÃ« tjera tÃ« forcÃ«s madhore;</li>
                <li>nÃ«se pajisja Ã«shtÃ« pÃ«rdorur nÃ« mÃ«nyrÃ« tÃ« pasaktÃ«, jashtÃ« udhÃ«zimeve tÃ« prodhuesit, ose nuk Ã«shtÃ« mirÃ«mbajtur sipas manualit;</li>
                <li>pÃ«r dÃ«mtime tÃ« shkaktuara nga pÃ«rdorimi i karburantit, vajrave ose lubrifikantÃ«ve tÃ« papÃ«rshtatshÃ«m;</li>
                <li>pÃ«r konsum normal tÃ« pjesÃ«ve (furÃ§a, gryka, gypa, filtra, gomina, bateri tÃ« konsumueshme);</li>
                <li>nÃ«se janÃ« pÃ«rdorur pjesÃ« kÃ«mbimi ose aksesorÃ« jo origjinalÃ« ose riparimi Ã«shtÃ« bÃ«rÃ« nga persona tÃ« paautorizuar;</li>
                <li>nÃ«se Ã«shtÃ« bÃ«rÃ« ndÃ«rhyrje/modifikim nÃ« pajisje pa miratimin e prodhuesit.</li>
            </ul>

            <p><strong>7.</strong> NÃ«se i njÃ«jti defekt shfaqet pÃ«rsÃ«ri brenda 6 muajve nga riparimi i bÃ«rÃ« gjatÃ« garancisÃ«, defekti do tÃ« riparohet sÃ«rish pa pagesÃ«, nÃ«se shkaku Ã«shtÃ« i njÃ«jtÃ« me defektin fillestar ose ka ardhur si pasojÃ« e riparimit tÃ« mÃ«parshÃ«m.</p>

            <p><strong>8.</strong> KÃ«rkesa tÃ« tjera pÃ«r dÃ«mshpÃ«rblim (p.sh. pÃ«r ndÃ«rprerje pune, humbje fitimi, dÃ«me pasuese) nuk pranohen, pÃ«rveÃ§ rasteve kur kjo parashikohet shprehimisht me ligj.</p>

            <p><strong>Garancia Ã«shtÃ« e vlefshme nÃ« tÃ« gjithÃ« territorin e RepublikÃ«s sÃ« ShqipÃ«risÃ«.</strong></p>
            <p><strong>** NÃ« tÃ« gjitha rastet e tjera zbatohen kushtet standarde tÃ« garancisÃ« sÃ« KÃ„RCHER.</strong></p>
            <p><strong>DANFOS SH.P.K, Rr. "Konferenca e PezÃ«s", Mistomame, TiranÃ« 1027, ShqipÃ«ri â€“ Tel: +355 69 203 6908 â€“ Email: info@danfosal.com â€“ NIPT: M41828015A</strong></p>

        </div>

        <!-- Right Column - Warranty Card and Repairs -->
        <div class="right-column">
                <div class="logo">
                    <div class="logo-text">KÃ„RCHER</div>
                </div>
                
                <div class="warranty-card">
                    <div class="header-text">
                        NÃ« mÃ«nyrÃ« qÃ« garancia tÃ« jetÃ« e vlefshme nÃ« rast tÃ« njÃ« defekti, Ã«shtÃ« e nevojshme qÃ« shitÃ«si tÃ« fusÃ« tÃ« gjitha informacionet e kÃ«rkuara gjatÃ« plotÃ«simit tÃ« kartÃ«s sÃ« garancisÃ«:
                    </div>
                    
                    <table>
                        <tr>
                            <td class="label">Emri i produktit:</td>
                            <td class="value" id="product-name"></td>
                        </tr>
                        <tr>
                            <td class="label">Numri i katalogu tÃ« produktit:</td>
                            <td class="value" id="catalog-number"></td>
                        </tr>
                        <tr>
                            <td class="label">Numri serial i produktit:</td>
                            <td class="value" id="serial-number"></td>
                        </tr>
                        <tr>
                            <td class="label">BlerÃ«si:</td>
                            <td class="value" id="buyer-name"></td>
                        </tr>
                        <tr>
                            <td class="label">Data e blerjes:</td>
                            <td class="value" id="purchase-date"></td>
                        </tr>
                        <tr>
                            <td class="label">Vendi i shitjes:</td>
                            <td class="value" id="sale-location"></td>
                        </tr>
                        <tr>
                            <td class="label">NÃ«nshkrimi dhe vula e shitÃ«sit:</td>
                            <td class="value" style="min-height: 25px;"></td>
                        </tr>
                    </table>
                </div>

                <div class="repairs-section">
                    <div class="repairs-header">Riparimet e bÃ«ra:</div>
                    <table class="repairs-table">
                        <tr>
                            <td class="repairs-label" style="border-bottom: 2px solid #000;">Data:</td>
                            <td style="border-bottom: 2px solid #000; border-right: 2px solid #000; width: 70px;"></td>
                            <td class="repairs-label" style="border-bottom: 2px solid #000;">Lloji i riparimit:</td>
                            <td style="border-bottom: 2px solid #000;"></td>
                        </tr>
                        <tr>
                            <td class="repairs-label" style="border-bottom: 2px solid #000;">Data:</td>
                            <td style="border-bottom: 2px solid #000; border-right: 2px solid #000; width: 70px;"></td>
                            <td class="repairs-label" style="border-bottom: 2px solid #000;">Lloji i riparimit:</td>
                            <td style="border-bottom: 2px solid #000;"></td>
                        </tr>
                        <tr>
                            <td class="repairs-label" style="border-bottom: 2px solid #000;">Data:</td>
                            <td style="border-bottom: 2px solid #000; border-right: 2px solid #000; width: 70px;"></td>
                            <td class="repairs-label" style="border-bottom: 2px solid #000;">Lloji i riparimit:</td>
                            <td style="border-bottom: 2px solid #000;"></td>
                        </tr>
                        <tr>
                            <td class="repairs-label">Data:</td>
                            <td style="border-right: 2px solid #000; width: 70px;"></td>
                            <td class="repairs-label">Lloji i riparimit:</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td colspan="4" style="height: 50px; vertical-align: top; padding-top: 5px;"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Print styles to hide notifications when printing -->
    <style media="print">        
        /* Hide any notifications when printing */
        div[style*="position: fixed"] {
            display: none !important;
        }
    </style>

    <script>
        // Get data from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        
        // Check for AI-sent data from localStorage
        const fromAI = localStorage.getItem('warranty_from_ai');
        
        if (fromAI === 'true') {
            // Use AI-sent data
            const customerName = localStorage.getItem('warranty_customer_name') || '';
            const productsData = JSON.parse(localStorage.getItem('warranty_products') || '[]');
            const total = localStorage.getItem('warranty_total') || '';
            
            // Fill warranty card with AI data
            document.getElementById('buyer-name').textContent = customerName;
            
            // Use first product for main product field
            if (productsData.length > 0) {
                document.getElementById('product-name').textContent = productsData[0].name || '';
            }
            
            // Set current date as purchase date
            const today = new Date();
            const formatDate = today.getDate().toString().padStart(2, '0') + '/' + 
                              (today.getMonth() + 1).toString().padStart(2, '0') + '/' + 
                              today.getFullYear();
            document.getElementById('purchase-date').textContent = formatDate;
            document.getElementById('sale-location').textContent = 'Danfosal Store';
            
            // Show AI notification
            showAIWarrantyNotification(customerName, total);
            
            // Clear stored data
            localStorage.removeItem('warranty_customer_name');
            localStorage.removeItem('warranty_products');
            localStorage.removeItem('warranty_total');
            localStorage.removeItem('warranty_from_ai');
        } else {
            // Use URL parameters (existing functionality)
            document.getElementById('product-name').textContent = urlParams.get('product') || '';
            document.getElementById('catalog-number').textContent = urlParams.get('catalog') || '';
            document.getElementById('serial-number').textContent = urlParams.get('serial') || '';
            document.getElementById('buyer-name').textContent = urlParams.get('buyer') || '';
            document.getElementById('purchase-date').textContent = urlParams.get('date') || '';
            document.getElementById('sale-location').textContent = urlParams.get('location') || '';
        }
        
        function showAIWarrantyNotification(customerName, total) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                color: white;
                padding: 20px 24px;
                border-radius: 12px;
                font-weight: 600;
                box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
                z-index: 10000;
                animation: slideInRight 0.5s ease-out;
                max-width: 400px;
                font-family: Arial, sans-serif;
                line-height: 1.4;
            `;
            
            notification.innerHTML = `
                ğŸ¤– <strong>AI Assistant Complete!</strong><br>
                ğŸ“„ Warranty card ready for ${customerName}<br>
                ğŸ’° Order total: â‚¬${total}<br><br>
                ğŸ« <strong>Print or save warranty card</strong><br>
                <button onclick="this.parentElement.remove(); window.print();" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; margin-top: 8px; margin-right: 8px;">ğŸ–¨ï¸ Print</button>
                <button onclick="this.parentElement.remove()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; margin-top: 8px;">âœ… Done</button>
            `;
            
            // Add animation styles
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // Auto-remove after 10 seconds if not manually closed
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOutRight 0.5s ease-out';
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 500);
                }
            }, 10000);
        }
        
        // Navigation function
        function goBack() {
            // If user came from AI workflow, go back to store sales
            const fromAI = localStorage.getItem('warranty_from_ai');
            
            if (window.history.length > 1) {
                // Go back to previous page
                window.history.back();
            } else {
                // Fallback to store sales page
                window.location.href = 'store-sales.html';
            }
        }
        
        // Add keyboard shortcut for easy navigation
        document.addEventListener('keydown', function(e) {
            // ESC key to go back
            if (e.key === 'Escape') {
                goBack();
            }
            // Ctrl+P to print
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });
    </script>
</body>
</html>
